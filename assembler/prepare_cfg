#!/bin/bash

############################################################################
# Copyright (c) 2011-2012 Saint-Petersburg Academic University
# All Rights Reserved
# See file LICENSE for details.
############################################################################


# compile and install libraries from ext

export assembler="`pwd`"
export src="$assembler/src"
export ext="$assembler/ext"
export build="$assembler/build"

echo "/**************************************/"
echo "/*****  building extern libraries *****/"
echo "/**************************************/"
echo "----"

ext/prepare_ext.sh

echo "/**************************************/"
echo "/********** copying configs  ***********/"
echo "/**************************************/"
./cpcfg

echo "/**************************************/"
echo "/********  preparing debug ************/"
echo "/**************************************/"

mkdir -p $build/debug
cd $build/debug
cmake $src -Dcfg="Debug"

echo "/**************************************/"
echo "/********  preparing release **********/"
echo "/**************************************/"

mkdir -p $build/release
cd $build/release
cmake $src
cd $assembler

cp src/include/k_range.hpp.template  src/include/k_range.hpp
